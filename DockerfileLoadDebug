FROM node:14.15.4-alpine

ENV TZ=Asia/Kolkata

ADD "package.json" /app/

WORKDIR /app

RUN apk add git

RUN apk add htop

RUN npm install --production

RUN npm install -g tick 

RUN apk add --update tzdata && cp /usr/share/zoneinfo/Asia/Kolkata /etc/localtime

ADD . /app

VOLUME ["/var/log"]

RUN mkdir -p /var/log/node_apps/

EXPOSE 7777

RUN ./node_modules/.bin/jsdoc -c ./jsdoc.conf -d public/js-docs

CMD ["npm" "run" "v8Profile"]

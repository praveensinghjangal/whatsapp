const q = require('q')
const __constants = require('../../../config/constants')
const __logger = require('../../../lib/logger')

class Template {
  constructor (maxConcurrent, userId) {
    this.http = ''
  }

  // when this service will be called we will call waba to get phone number to use here in redis
  addTemplate (templateData, wabaNumber) {
    __logger.info('Demo addTemplate ::>>>>>>>>>>>>>>>>>>>>> ', templateData)
    const deferred = q.defer()
    deferred.resolve({ type: __constants.RESPONSE_MESSAGES.SUCCESS, data: {} })
    return deferred.promise
  }

  getTemplateList (wabaNumber) {
    __logger.info('Demo getTemplateList ::>>>>>>>>>>>>>>>>>>>>> ', wabaNumber)
    const deferred = q.defer()
    if (wabaNumber) {
      deferred.resolve({ ...__constants.RESPONSE_MESSAGES.SUCCESS, data: { status_code: 200, code: 2000, message: 'Success', data: [{ whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'welcome', category: 'AUTO_REPLY', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'BODY', text: 'Hi {{1}},\n\nwelcome at our support.\nHow can we help you?\n\nVivaconnect support team.' }], createdAt: '2020-06-03T14:10:08.354Z', lastUpdated: '2020-06-22T10:00:53.100Z' }], templateId: 'welcome' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'account_update_1', category: 'ACCOUNT_UPDATE', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'BODY', text: 'This is to remind you that {{1}} is due by {{2}}.' }], createdAt: '2020-06-04T11:30:05.651Z', lastUpdated: '2020-06-04T11:30:05.651Z' }], templateId: 'account_update_1' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'account_update_2', category: 'ACCOUNT_UPDATE', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'BODY', text: 'You have done a transaction worth {{1}} at {{2}} for {{3}}.' }], createdAt: '2020-06-04T11:30:05.651Z', lastUpdated: '2020-06-04T11:30:05.651Z' }], templateId: 'account_update_2' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'statement_update_1', category: 'PERSONAL_FINANCE_UPDATE', localizations: [{ status: 'REJECTED', rejectionReason: 'PROMOTIONAL', language: 'en', components: [{ type: 'HEADER', format: 'DOCUMENT' }, { type: 'BODY', text: 'Hi {{1}},\nPlease find {{2}} statement for month {{3}}.' }, { type: 'FOOTER', text: 'Vivaconnect Pvt Ltd' }], createdAt: '2020-06-04T11:30:05.651Z', lastUpdated: '2020-06-22T14:40:54.938Z' }], templateId: 'statement_update_1' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'opt_1', category: 'ALERT_UPDATE', localizations: [{ status: 'DELETED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'BODY', text: 'Your OTP for {{1}} is {{2}}. This is valid for {{3}}.' }], createdAt: '2020-06-04T11:30:05.651Z', lastUpdated: '2020-11-27T07:40:12.838Z', expiresAt: '2020-12-27T07:40:12.838Z' }, { status: 'DELETED', rejectionReason: 'NONE', language: 'hi', components: [{ type: 'BODY', text: '{{1}} के लिए आपका OTP {{2}} है। यह {{3}} के लिए मान्य है।' }], createdAt: '2020-06-04T11:30:05.651Z', lastUpdated: '2020-11-27T07:40:12.838Z', expiresAt: '2020-12-27T07:40:12.838Z' }], templateId: 'opt_1' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'register_thanks_1', category: 'AUTO_REPLY', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'HEADER', format: 'IMAGE' }, { type: 'BODY', text: 'Thank You for registering your request with Helo.ai.\nYou can connect with us at whatsapp.helo@vivaconnect.co' }, { type: 'FOOTER', text: 'Vivaconnect Pvt Ltd' }, { type: 'BUTTONS', buttons: [{ type: 'URL', text: 'visit us', url: 'http://helo.co.in/' }, { type: 'PHONE_NUMBER', text: 'Contact us', phoneNumber: '+918080800808' }] }], createdAt: '2020-06-04T11:30:05.651Z', lastUpdated: '2020-06-04T11:30:05.651Z' }], templateId: 'register_thanks_1' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'register_thanks_converse', category: 'AUTO_REPLY', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'BODY', text: 'Thank You for registering your request with Helo.ai.\nYou can connect with us anytime by clicking below buttons' }, { type: 'FOOTER', text: 'Vivaconnect Pvt Ltd' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: 'Account Details' }, { type: 'QUICK_REPLY', text: 'Personal Details' }] }], createdAt: '2020-09-02T08:36:54.362Z', lastUpdated: '2020-09-03T07:41:33.852Z' }, { status: 'APPROVED', rejectionReason: 'NONE', language: 'hi', components: [{ type: 'BODY', text: 'Helo.ai के साथ अपने अनुरोध को पंजीकृत करने के लिए धन्यवाद। \n आप नीचे दिए गए बटन पर क्लिक करके कभी भी हमारे साथ जुड़ सकते हैं' }, { type: 'FOOTER', text: 'विवाकोंनेक्ट प्राइवेट लिमिटेड' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: 'खाता विवरण' }, { type: 'QUICK_REPLY', text: 'व्यक्तिगत विवरण' }] }], createdAt: '2020-09-14T15:10:14.462Z', lastUpdated: '2020-09-30T14:56:43.280Z' }], templateId: 'register_thanks_converse' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'registration_otp', category: 'AUTO_REPLY', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'hi', components: [{ type: 'BODY', text: '{{1}} के लिए आपका OTP {{2}} है। यह {{3}} के लिए मान्य है।' }], createdAt: '2020-09-02T08:36:54.362Z', lastUpdated: '2020-09-04T06:31:32.553Z' }, { status: 'APPROVED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'BODY', text: 'Thank You for registering your request with Helo.ai.\nYou can connect with us anytime by clicking below buttons' }, { type: 'FOOTER', text: 'Vivaconnect Pvt Ltd' }], createdAt: '2020-09-02T08:36:54.362Z', lastUpdated: '2020-09-04T06:31:32.550Z' }], templateId: 'registration_otp' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'be9c55ee_546f_465b_8039_93aa5ac3d1633', category: 'APPOINTMENT_UPDATE', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'hi', components: [{ type: 'HEADER', format: 'TEXT', text: 'हैलो {{1}}' }, { type: 'BODY', text: 'हैलो {{1}}\nकुलपति का स्वागत\nआपका रेग नंबर {{2}} है' }, { type: 'FOOTER', text: 'हैलो' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: 'कुलपति' }, { type: 'QUICK_REPLY', text: 'नंबर' }, { type: 'QUICK_REPLY', text: 'हैलो' }] }], createdAt: '2020-09-14T14:55:08.866Z', lastUpdated: '2020-10-07T16:06:58.987Z' }, { status: 'REJECTED', rejectionReason: 'INVALID_FORMAT', language: 'en', components: [{ type: 'HEADER', format: 'TEXT', text: 'hi {{1}}' }, { type: 'BODY', text: 'hi \n{{1}}' }, { type: 'FOOTER', text: 'viva' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: '1' }, { type: 'QUICK_REPLY', text: '2' }, { type: 'QUICK_REPLY', text: '3111111111111' }] }], createdAt: '2020-09-14T14:55:08.866Z', lastUpdated: '2020-10-07T16:46:49.831Z' }], templateId: 'be9c55ee_546f_465b_8039_93aa5ac3d1633' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'be9c55ee_546f_465b_8039_93aa5ac3d1631', category: 'APPOINTMENT_UPDATE', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'hi', components: [{ type: 'HEADER', format: 'TEXT', text: 'हैलो {{1}}' }, { type: 'BODY', text: 'हैलो {{1}}\nकुलपति का स्वागत\nआपका रेग नंबर {{2}} है' }, { type: 'FOOTER', text: 'हैलो' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: 'कुलपति' }, { type: 'QUICK_REPLY', text: 'नंबर' }, { type: 'QUICK_REPLY', text: 'हैलो' }] }], createdAt: '2020-09-14T14:55:08.866Z', lastUpdated: '2020-10-07T15:56:59.291Z' }, { status: 'REJECTED', rejectionReason: 'INVALID_FORMAT', language: 'en', components: [{ type: 'HEADER', format: 'TEXT', text: 'hi {{1}}' }, { type: 'BODY', text: 'hi \n{{1}}' }, { type: 'FOOTER', text: 'viva' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: '1' }, { type: 'QUICK_REPLY', text: '2' }, { type: 'QUICK_REPLY', text: '3111111111111' }] }], createdAt: '2020-09-14T14:55:08.866Z', lastUpdated: '2020-10-07T16:46:49.811Z' }], templateId: 'be9c55ee_546f_465b_8039_93aa5ac3d1631' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'be9c55ee_546f_465b_8039_93aa5ac3d1632', category: 'APPOINTMENT_UPDATE', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'hi', components: [{ type: 'HEADER', format: 'TEXT', text: 'हैलो {{1}}' }, { type: 'BODY', text: 'हैलो {{1}}\nकुलपति का स्वागत\nआपका रेग नंबर {{2}} है' }, { type: 'FOOTER', text: 'हैलो' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: 'कुलपति' }, { type: 'QUICK_REPLY', text: 'नंबर' }, { type: 'QUICK_REPLY', text: 'हैलो' }] }], createdAt: '2020-09-14T14:55:08.866Z', lastUpdated: '2020-10-07T15:56:59.297Z' }, { status: 'REJECTED', rejectionReason: 'INVALID_FORMAT', language: 'en', components: [{ type: 'HEADER', format: 'TEXT', text: 'hi {{1}}' }, { type: 'BODY', text: 'hi \n{{1}}' }, { type: 'FOOTER', text: 'viva' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: '1' }, { type: 'QUICK_REPLY', text: '2' }, { type: 'QUICK_REPLY', text: '3111111111111' }] }], createdAt: '2020-09-14T14:55:08.866Z', lastUpdated: '2020-10-07T16:46:49.816Z' }], templateId: 'be9c55ee_546f_465b_8039_93aa5ac3d1632' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'be9c55ee_546f_465b_8039_93aa5ac3d163', category: 'APPOINTMENT_UPDATE', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'hi', components: [{ type: 'HEADER', format: 'TEXT', text: 'हैलो {{1}}' }, { type: 'BODY', text: 'हैलो {{1}}\nकुलपति का स्वागत\nआपका रेग नंबर {{2}} है' }, { type: 'FOOTER', text: 'हैलो' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: 'कुलपति' }, { type: 'QUICK_REPLY', text: 'नंबर' }, { type: 'QUICK_REPLY', text: 'हैलो' }] }], createdAt: '2020-09-14T14:55:08.866Z', lastUpdated: '2020-10-07T15:56:59.276Z' }, { status: 'REJECTED', rejectionReason: 'INVALID_FORMAT', language: 'en', components: [{ type: 'HEADER', format: 'TEXT', text: 'hi {{1}}' }, { type: 'BODY', text: 'hi \n{{1}}' }, { type: 'FOOTER', text: 'viva' }, { type: 'BUTTONS', buttons: [{ type: 'QUICK_REPLY', text: '1' }, { type: 'QUICK_REPLY', text: '2' }, { type: 'QUICK_REPLY', text: '3111111111111' }] }], createdAt: '2020-09-14T14:55:08.866Z', lastUpdated: '2020-10-07T16:46:49.806Z' }], templateId: 'be9c55ee_546f_465b_8039_93aa5ac3d163' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'welcome3', category: 'AUTO_REPLY', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'BODY', text: 'Hi {{1}},\n\nwelcome at our support.\nHow can we help you?\n\nVivaconnect support team.' }], createdAt: '2020-09-14T15:10:14.462Z', lastUpdated: '2020-09-28T08:06:35.424Z' }], templateId: 'welcome3' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'welcomeuser', category: 'AUTO_REPLY', localizations: [{ status: 'REJECTED', rejectionReason: 'PROMOTIONAL', language: 'en', components: [{ type: 'BODY', text: 'Hi' }], createdAt: '2020-10-08T08:52:08.345Z', lastUpdated: '2020-10-14T04:46:27.124Z' }], templateId: 'welcomeuser' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: '2fb51c30_3a75_4a75_9569_1ed9bddca31d', category: 'ACCOUNT_UPDATE', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'BODY', text: 'Successfully registered with us.' }], createdAt: '2020-10-20T10:38:53.855Z', lastUpdated: '2020-10-22T14:56:54.794Z' }], templateId: '2fb51c30_3a75_4a75_9569_1ed9bddca31d' }, { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'cf134762_bfbd_4d49_9dee_264ccb218a43', category: 'TRANSPORTATION_UPDATE', localizations: [{ status: 'DELETED', rejectionReason: 'INVALID_FORMAT', language: 'pa', components: [{ type: 'BODY', text: 'adsdasd' }], createdAt: '2020-10-28T20:20:11.430Z', lastUpdated: '2020-11-05T07:50:21.068Z', expiresAt: '2020-12-05T07:50:21.068Z' }, { status: 'DELETED', rejectionReason: 'PROMOTIONAL', language: 'en', components: [{ type: 'BODY', text: 'hey' }], createdAt: '2020-10-28T20:20:11.430Z', lastUpdated: '2020-11-05T07:50:21.068Z', expiresAt: '2020-12-05T07:50:21.068Z' }], templateId: 'cf134762_bfbd_4d49_9dee_264ccb218a43' }] } })
      return deferred.promise
    } else {
      deferred.reject({ type: __constants.RESPONSE_MESSAGES.INVALID_REQUEST, error: 'Missing wabaNumber' })
      return deferred.promise
    }
  }

  getTemplateInfo (wabaNumber, templateId) {
    __logger.info('Demo getTemplateInfo ::>>>>>>>>>>>>>>>>>>>>> ', wabaNumber, templateId)
    const deferred = q.defer()
    if (wabaNumber && templateId) {
      deferred.resolve({ status_code: 200, code: 2000, message: 'Success', data: { whatsAppAccountId: 'b6210d0f-acb3-4dfa-8b52-0972c8045706', templateName: 'register_thanks_1', category: 'AUTO_REPLY', localizations: [{ status: 'APPROVED', rejectionReason: 'NONE', language: 'en', components: [{ type: 'HEADER', format: 'IMAGE' }, { type: 'BODY', text: 'Thank You for registering your request with Helo.ai.\nYou can connect with us at whatsapp.helo@vivaconnect.co' }, { type: 'FOOTER', text: 'Vivaconnect Pvt Ltd' }, { type: 'BUTTONS', buttons: [{ type: 'URL', text: 'visit us', url: 'http://helo.co.in/' }, { type: 'PHONE_NUMBER', text: 'Contact us', phoneNumber: '+918080800808' }] }], createdAt: '2020-06-04T11:30:05.651Z', lastUpdated: '2020-06-04T11:30:05.651Z', messageTemplateStatusId: '1d9d14ca-d3ec-4bea-b3de-05fcb8ceabd9' }], templateId: 'register_thanks_1' } })
      return deferred.promise
    } else {
      deferred.reject({ type: __constants.RESPONSE_MESSAGES.INVALID_REQUEST, err: 'Missing' })
      return deferred.promise
    }
  }

  deleteTemplate (wabaNumber, templateId) {
    __logger.info('Demo deleteTemplate::Template Service >>>>>>>>>>>>>>>>>>>>>>>>>>', { wabaNumber, templateId })
    const deferred = q.defer()
    if (wabaNumber && templateId) {
      deferred.resolve({ type: __constants.RESPONSE_MESSAGES.TEMPLATE_SENT_FOR_DELETION, data: {} })
      return deferred.promise
    } else {
      __logger.info('Demo deleteTemplate::No waba and templateId =======?>', { wabaNumber, templateId })
      deferred.reject({ type: __constants.RESPONSE_MESSAGES.SERVER_ERROR, err: {} })
      return deferred.promise
    }
  }
}

module.exports = Template
